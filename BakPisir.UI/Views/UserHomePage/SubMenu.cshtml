
@model  List<BakPisir.DTO.Dtos.SubCategoryDto>


@*UserHomePage/SubMenu/id actionı tarafından gönderilen partialview burda ekrana döndürülür.
    Get isteğiyle id sonucu oluşan verileri ekrana listeler*@


@foreach (var subCategory in Model)
{
    <ul class="menu-sub">
        <li class="menu-item" onclick="getSubCategoryId(@subCategory.subCategoryId)">
            <a class="menu-link">
                <span class="menu-text" style="font-size:small">@subCategory.subCategoryName</span>
            </a>
        </li>

    </ul>

}

<script>
    function getSubCategoryId(id) {
        $.ajax({
            url: '@Url.Action("GetAllRecipeBySubCategoryId", "UserHomePage")/' + id,
            datatype: 'JSON',
            type: 'GET',
            success: function (data) {
                var $myHtml = $('<div>');
                if (data.Items.length % 3 == 0) {
                    for (i = 0; i < data.Items.length; i = i + 3) {
                        $myHtml.append('<div class="row">\
                                <div class="col-md-6 col-lg-4 mb-3">\
                                    <div class="card h-100">\
                                  <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[i].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                     <div class="card-body">\
                                         <h4 class="card-title">' + data.Items[i].recipeName + '</h4>\
                                          <h6>Pişirme Süresi:' + data.Items[i].cookingTime + '</h6>\
                                                 <p class="card-text">İçindekiler:' + data.Items[i].ingredients + '</p>\
                                                 <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div>\
                                 <div class="col-md-6 col-lg-4 mb-3">\
                                    <div class="card h-100">\
                                  <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[i + 1].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                     <div class="card-body">\
                                         <h4 class="card-title">' + data.Items[i + 1].recipeName + '</h4>\
                                          <h6>Pişirme Süresi:' + data.Items[i + 1].cookingTime + '</h6>\
                                                 <p class="card-text">İçindekiler:' + data.Items[i + 1].ingredients + '</p>\
                                                 <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div>\
                                  <div class="col-md-6 col-lg-4 mb-3">\
                                   <div class="card h-100">\
                                  <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[i + 2].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                <div class="card-body">\
                                 <h4 class="card-title">' + data.Items[i + 2].recipeName + ' </h4>\
                                  <h6>Pişirme Süresi:' + data.Items[i + 2].cookingTime + '</h6>\
                                    <p class="card-text">İçindekiler:' + data.Items[i + 2].ingredients + '</p>\
                                         <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div></div>')
                    }
                }
                if (data.Items.length % 3 == 1) {
                    for (i = 0; i < (data.Items.length - 1); i = i + 3) {
                        $myHtml.append('<div class="row">\
                                <div class="col-md-6 col-lg-4 mb-3">\
                                    <div class="card h-100">\
                                  <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[i].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                     <div class="card-body">\
                                         <h4 class="card-title">' + data.Items[i].recipeName + '</h4>\
                                          <h6>Pişirme Süresi:' + data.Items[i].cookingTime + '</h6>\
                                                 <p class="card-text">İçindekiler:' + data.Items[i].ingredients + '</p>\
                                                 <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div>\
                                 <div class="col-md-6 col-lg-4 mb-3">\
                                    <div class="card h-100">\
                                  <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[i + 1].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                     <div class="card-body">\
                                         <h4 class="card-title">' + data.Items[i + 1].recipeName + '</h4>\
                                          <h6>Pişirme Süresi:' + data.Items[i + 1].cookingTime + '</h6>\
                                                 <p class="card-text">İçindekiler:' + data.Items[i + 1].ingredients + '</p>\
                                                 <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div>\
                                  <div class="col-md-6 col-lg-4 mb-3">\
                                   <div class="card h-100">\
                                  <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[i + 2].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                <div class="card-body">\
                                 <h4 class="card-title">' + data.Items[i + 2].recipeName + ' </h4>\
                                  <h6>Pişirme Süresi:' + data.Items[i + 2].cookingTime + '</h6>\
                                    <p class="card-text">İçindekiler:' + data.Items[i + 2].ingredients + '</p>\
                                         <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div></div>')
                    }
                    $myHtml.append('<div class="col-md-6 col-lg-4 mb-3" >\
                            <div class="card h-100">\
                                <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[(data.Items.length) - 1].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                        <div class="card-body">\
                                        <h4 class="card-title">' + data.Items[(data.Items.length) - 1].recipeName + '</h4>\
                                             <h6>Pişirme Süresi:' + data.Items[(data.Items.length) - 1].cookingTime + '</h6>\
                                              <p class="card-text">İçindekiler:' + data.Items[(data.Items.length) - 1].ingredients + '</p>\
                                                 <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div>')

                }
                if (data.Items.length % 3 == 2) {
                    for (i = 0; i < (data.Items.length - 2); i = i + 3) {
                        $myHtml.append('<div class="row">\
                                <div class="col-md-6 col-lg-4 mb-3">\
                                    <div class="card h-100">\
                                  <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[i].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                     <div class="card-body">\
                                         <h4 class="card-title">' + data.Items[i].recipeName + '</h4>\
                                          <h6>Pişirme Süresi:' + data.Items[i].cookingTime + '</h6>\
                                                 <p class="card-text">İçindekiler:' + data.Items[i].ingredients + '</p>\
                                                 <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div>\
                                 <div class="col-md-6 col-lg-4 mb-3">\
                                    <div class="card h-100">\
                                  <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[i + 1].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                     <div class="card-body">\
                                         <h4 class="card-title">' + data.Items[i + 1].recipeName + '</h4>\
                                          <h6>Pişirme Süresi:' + data.Items[i + 1].cookingTime + '</h6>\
                                                 <p class="card-text">İçindekiler:' + data.Items[i + 1].ingredients + '</p>\
                                                 <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div>\
                                  <div class="col-md-6 col-lg-4 mb-3">\
                                   <div class="card h-100">\
                                  <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[i + 2].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                <div class="card-body">\
                                 <h4 class="card-title">' + data.Items[i + 2].recipeName + ' </h4>\
                                  <h6>Pişirme Süresi:' + data.Items[i + 2].cookingTime + '</h6>\
                                    <p class="card-text">İçindekiler:' + data.Items[i + 2].ingredients + '</p>\
                                         <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div></div>')
                    }
                    $myHtml.append('<div class="row">\
                                        <div class="col-md-6 col-lg-4 mb-3" >\
                                         <div class="card h-100">\
                                             <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[(data.Items.length) - 1].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                        <div class="card-body">\
                                        <h4 class="card-title">' + data.Items[(data.Items.length) - 1].recipeName + '</h4>\
                                             <h6>Pişirme Süresi:' + data.Items[(data.Items.length) - 1].cookingTime + '</h6>\
                                              <p class="card-text">İçindekiler:' + data.Items[(data.Items.length) - 1].ingredients + '</p>\
                                                 <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div>\
                                           <div class="col-md-6 col-lg-4 mb-3" >\
                                         <div class="card h-100">\
                                             <img class="card-img-top" src="http://localhost:44355/Uploads/RecipePictures/'+ data.Items[(data.Items.length) - 2].recipeImageUrl + '" alt="Card image cap" height="300" weight="700" />\
                                        <div class="card-body">\
                                        <h4 class="card-title">' + data.Items[(data.Items.length) - 2].recipeName + '</h4>\
                                             <h6>Pişirme Süresi:' + data.Items[(data.Items.length) - 2].cookingTime + '</h6>\
                                              <p class="card-text">İçindekiler:' + data.Items[(data.Items.length) - 2].ingredients + '</p>\
                                <a href="javascript:void(0)" class="btn btn-outline-primary">Tarifi Dene</a></div></div></div ></div>')
                }
                $("#listRecipe").html($myHtml);


            },
            error: function (response) {
                console.log(response)

            }
        });
    }
   </script>


